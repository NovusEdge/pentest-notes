
## Secure SHell (SSH)
SSH consists of 3 distinct layers:
1. The transport layer
2. The auth. layer
3. The connection layer

It can be used for the following:
- **File transfers** – SFTP, a secure file transfer protocol managed by SSH, provides a safe way to manipulate files over a network.
- **X11 Forwarding** – Users can run server-hosted X applications from their client machines.
- **Network management** – The SSH protocol manages network infrastructure and other parts of the system.
- **Port Forwarding** - By mapping a client’s port to the server’s remote ports, SSH helps secure other network protocols, such as TCP/IP.

#### File Transfer

Transferring files is done through the `scp` utility. Here's an example:
```shell-session
## From Local FS to Remote FS
user@system:~$ scp LOCAL_FILE user@REMOTE_IP:DESTINATION_PATH

## From Remote FS to Local FS
user@system:~$ scp user@REMOTE_IP:SOURCE_PATH LOCAL_DESTINATION_PATH

## From one remote host to another remote host
user@system:~$ scp user1@REMOTE_IP1:SOURCE_PATH user2@REMOTE_IP2:DESTINATION_PATH
```

To route the traffic through the machine on which the command is issued, use the `-3` option:
```shell-session
user@system:~$ scp -3 user1@REMOTE_IP1:/files/file.txt user2@REMOTE_IP2:/files
```
#### Port Forwarding

Using `ssh` to port forward locally looks something like:
```shell-session
user@system:~$ ssh -L LOCAL_PORT:LOCALHOST:REMOTE_IP REMOTE_IP
```
![[ssh_local_portforward.png]]

Kinda looks like this if you use an ASCII diagram to show this:
```ascii-diagram
[Your Computer] ----SSH Tunnel----> [Remote Server]
     |                                    |
     |                                    |
[LOCAL_PORT]                          [REMOTE_IP]
     |                                    ^
     └---- Data sent here ----┐           |
                              |           |
                              └--> Forwards data to REMOTE_IP
```


And remote port forwarding looks like:
```shell-session
user@system:~$ ssh –R REMOTE_PORT:localhost:LOCAL_PORT user@REMOTE_IP
```

Basically does the opposite. Instead of a service running on `localhost` forwarding data to a remote server's port, it takes the data from a remote server's service on `REMOTE_PORT` and forwards it to `localhost:LOCAL_PORT`.
```ascii-diagram
[Remote Server] ----SSH Tunnel----> [Your Computer]
     |                                    |
     |                                    |
[REMOTE_PORT]                        [LOCAL_PORT]
     |                                    |
     └---- Data sent here ----┐           |
                              |           |
                              └--> Forwards data to LOCAL_PORT
```

## File Permissions

Every file/directory/resource in linux has a set of permissions associated with it. Here's what it looks like:
![[linux-file-permissions.png]]

To break it down. Here's the identifiers for permissions that translate to octal values that indicate permissions:

| Bit | Purpose       | Octal Value |
| --- | ------------- | ----------- |
| `r` | Read          | 4           |
| `w` | Write         | 2           |
| `x` | Execute       | 1           |
| `-` | No permission | 0           |


| File type        | Purpose |
| ---------------- | ------- |
| Directory        | `d`     |
| Regular file     | `-`     |
| Character Device | `c`     |
| Link             | `l`     |
| Socket File      | `s`     |
| Pipe             | `p`     |
| Block Device     | `b`     |

The file permissions can be modified using the `chmod` command. 

## The Filesystem

| Directory | Purpose |
|-----------|---------|
| `/`       | The root directory. Everything on your Linux system is located under the `/` directory, known as the root directory. |
| `/bin`    | Contains essential binary executables (programs) that need to be present for the system to boot and run. |
| `/boot`   | Contains files needed to start the boot process. |
| `/dev`    | Contains device files which represent hardware components. |
| `/etc`    | Contains configuration files for the system and other software. |
| `/home`   | Contains the personal directories of all users. |
| `/lib`    | Contains essential shared libraries and kernel modules. |
| `/media`  | Mount point for removable media like USB drives, CD-ROMs, etc. |
| `/mnt`    | Temporary mount point where system administrators can mount filesystems. |
| `/opt`    | Optional software and packages not included in the default installation. |
| `/proc`   | Virtual filesystem providing process and kernel information as files. |
| `/root`   | Home directory for the root user (not to be confused with `/`). |
| `/sbin`   | Contains system binaries, essential binaries related to system administration. |
| `/srv`    | Contains data for services provided by the system. |
| `/sys`    | Contains information about devices, drivers, and some kernel features. |
| `/tmp`    | Temporary files (often cleared on reboot or at intervals). |
| `/usr`    | Contains the majority of user utilities and applications. |
| `/var`    | Contains variable data like logs, databases, websites, and cached files. |

#### Some Important Files

| File Path                          | Description |
|------------------------------------|-------------|
| `/etc/passwd`                      | User account information. |
| `/etc/shadow`                      | Encrypted passwords and related information (requires root privileges). |
| `/etc/group`                       | Group account information. |
| `/etc/hosts`                       | Hostnames and IP addresses mapping. |
| `/etc/sysconfig/network-scripts/`  | Network scripts, including configuration files for network interfaces. |
| `/etc/sudoers`                     | Configuration for sudo privileges. |
| `/root/.ssh/id_rsa`                | Private SSH keys for the root user. |
| `/home/[user]/.ssh/id_rsa`         | Private SSH keys for other users. |
| `/var/log/auth.log`                | Authentication logs (location varies by distribution). |
| `/var/log/apache2/access.log`      | Apache web server access logs (path varies). |
| `/var/log/apache2/error.log`       | Apache web server error logs (path varies). |
| `/var/www/html/`                   | Web server root directory (for Apache, path varies by configuration). |
| `/etc/httpd/conf/httpd.conf`       | Apache HTTP server configuration file (path varies by distribution). |
| `/etc/mysql/my.cnf`                | MySQL database configuration file (path varies). |
| `/var/lib/mysql/mysql/user.MYD`    | MySQL user database file (path and extension might vary). |
| `/etc/php5/apache2/php.ini`        | PHP configuration file (path varies by PHP and server version). |
| `.bash_history`                    | Bash history file, can contain previously executed commands. |
| `/etc/fstab`                       | Filesystem mount points and configurations. |
| `/etc/ssh/sshd_config`             | SSH daemon configuration. |



